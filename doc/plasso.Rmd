---
title: "An introduction to `plasso`"
author: "Michael Knaus & Stefan Glaisner"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output: 
  html_document:
    toc: true
    toc_float: true
    code_folding: show
---

```{r, include=FALSE}

hook_output <- knitr::knit_hooks$get("output")

knitr::knit_hooks$set(output = function(x, options) {
  if (!is.null(n <- options$out.lines)) {
    x <- xfun::split_lines(x)
    if (length(x) > n) {
      x <- c(head(x, n), "....\n")
    }
    x <- paste(x, collapse = "\n")
  }
  hook_output(x, options)
})

```

This notebook provides a detailed overview over the `plasso` package and its two main functions `plasso` and `cv.plasso`. This package is strongly oriented around the `glmnet` package and rests on its standard function `glmnet` in its very basis.


# Getting started

Make sure that you install the package from its [Github page](https://github.com/stefan-1997/plasso). For the installation you will need the `devtools` package. General dependencies are: `glmnet`, `Matrix`, `methods`, `parallel`, `doParallel`, `foreach` and `iterators`.

```{r, eval=FALSE}

library(devtools)
devtools::install_github("stefan-1997/plasso")

```

Then, `plasso` can be loaded via the standard `library` function.

```{r}

library(plasso)

```

The package generally provides two functions `plasso` and `cv.plasso` which are both built on top of the `glmnet` functionality. Specifically, a `glmnet` object lives within both functions and also in their outputs (list item `lasso_full`).

The term `plasso` refers to a Post-Lasso model which estimates a least squares algorithm only for the active (i.e. non-zero) coefficients of a previously estimated Lasso models. This follows the idea that we want to do selection but without shrinkage.

We will deal with some simulated data here.

```{r}

n = 1000
p = 20
x = matrix(runif(n*p,-pi,pi),ncol=p)
y = runif(n)
w = runif(n)

```

# plasso

`plasso` basically estimates least squares estimates for all lambda values of a standard `glmnet` object. The function's standard output is comparable to the one of a simple `glmnet` output.

```{r out.lines=10}

fit_p = plasso::plasso(x,y,w)
fit_p

```



```{r out.lines=10}

summary(fit_p)

```


# cv.plasso

tbd

```{r}

fit_p_cv = plasso::cv.plasso(x,y,w)
print(fit_p_cv)

```


